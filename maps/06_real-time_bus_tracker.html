<script>
  async function run() {
    // get bus data
    const locations = await getBusLocations();
    console.log(new Date());
    console.log(locations);

    // timer
    setTimeout(run, 15000); //get bus locations every 15sec.
  }

  // Request bus data from MBTA
  async function getBusLocations() {
    const url = "https://api-v3.mbta.com/vehicles?filter[route]=1&include=trip";
    const response = await fetch(url);
    //wait to fetch to complete.
    const json = await response.json();
    //wait for that to be extracted.
    return json.data;
  }

  run();
</script>
